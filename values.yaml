# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Global values
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
global:
  domain: auth.estebanmf.space


# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Namespaces
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
namespaces:
  argocd: argocd
  certManager: cert-manager
  ingress: ingress-nginx
  zitadel: auth


# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Cert-manager subchart
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
certManager:
  enabled: true
  installCRDs: true

# ClusterIssuer values for your custom template (10-clusterissuer-cloudflare.yaml)
letsencrypt:
  clusterIssuerName: letsencrypt-cloudflare
  email: you@example.com                # ðŸ‘ˆ replace with your real email
  cloudflareAPITokenSecretName: cloudflare-api-token-secret
  cloudflareAPITokenKey: api-token

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Ingress-nginx subchart
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ingressNginx:
  enabled: true
  controller:
    service:
      annotations: {}   # add DigitalOcean LB annotations if needed

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ZITADEL subchart
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
zitadel:
  enabled: true
  fullnameOverride: "zitadel"

  # ðŸ‘‡ forward the global domain so Zitadel chart doesnâ€™t error
  global:
    domain: auth.estebanmf.space

  zitadel:
    masterkeySecretName: "zitadel-masterkey"
    configmapConfig:
      ExternalDomain: "auth.estebanmf.space"
      ExternalPort: 443
      ExternalSecure: true
      TLS:
        Enabled: true
    secretConfig:
      TLS:
        existingSecret: "zitadel-internal-tls"
        certKey: "tls.crt"
        keyKey: "tls.key"

  ingress:
    enabled: true
    className: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-cloudflare
      nginx.ingress.kubernetes.io/backend-protocol: "HTTPS"
      nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
      nginx.ingress.kubernetes.io/proxy-buffer-size: "128k"
    hosts:
      - host: auth.estebanmf.space
        paths:
          - path: /
            pathType: Prefix
    tls:
      - secretName: auth-estebanmf-space-tls
        hosts:
          - auth.estebanmf.space

  login:
    ingress:
      enabled: true
      className: nginx
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-cloudflare
        nginx.ingress.kubernetes.io/backend-protocol: "HTTPS"
        nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
        nginx.ingress.kubernetes.io/proxy-buffer-size: "128k"
      hosts:
        - host: auth.estebanmf.space
          paths:
            - path: /ui/v2/login
              pathType: Prefix
      tls:
        - secretName: auth-estebanmf-space-tls
          hosts:
            - auth.estebanmf.space

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Dev placeholders
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
_dev:
  generateDummyZitadelSecrets: false

